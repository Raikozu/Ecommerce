{"ast":null,"code":"import { API } from '../constants';\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nclass LoginComponent {\n  constructor(apiService, router) {\n    this.apiService = apiService;\n    this.router = router;\n    this.isSellerLoggedIn = new BehaviorSubject(false);\n  }\n  ngOnInit() {\n    if (localStorage.getItem(\"admin\")) {\n      this.isSellerLoggedIn.next(true);\n      this.router.navigate(['admin']);\n    }\n  }\n  login(data) {\n    let result = this.apiService.makeRequest(\"post\", API.utente + API.accedi, data);\n    result.subscribe(response => {\n      const tokenData = JSON.stringify(response);\n      const token = JSON.parse(tokenData);\n      const ruolo = token.ruolo;\n      if (ruolo === \"ADMIN\") {\n        localStorage.setItem(\"admin\", tokenData);\n        this.isSellerLoggedIn.next(true);\n        this.router.navigate(['admin']);\n      }\n    });\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 10,\n  vars: 0,\n  consts: [[1, \"login-container\"], [1, \"\"], [1, \"form-setup\"], [1, \"common-form\", 3, \"ngSubmit\"], [\"sellerSignUp\", \"ngForm\"], [\"type\", \"email\", \"ngModel\", \"\", \"name\", \"email\", \"placeholder\", \"Enter email\", 1, \"form-input\"], [\"type\", \"password\", \"ngModel\", \"\", \"name\", \"password\", \"placeholder\", \"Enter password\", 1, \"form-input\"], [1, \"form-button\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r1 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n      i0.ɵɵtext(3, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"form\", 3, 4);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n        i0.ɵɵrestoreView(_r1);\n        const _r0 = i0.ɵɵreference(5);\n        return i0.ɵɵresetView(ctx.login(_r0.value));\n      });\n      i0.ɵɵelement(6, \"input\", 5)(7, \"input\", 6);\n      i0.ɵɵelementStart(8, \"button\", 7);\n      i0.ɵɵtext(9, \"Login\");\n      i0.ɵɵelementEnd()()()();\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm],\n  styles: [\".form-setup[_ngcontent-%COMP%]{\\r\\n    text-align: center;\\r\\n    color: darkcyan;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGtCQUFrQjtJQUNsQixlQUFlO0FBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiLmZvcm0tc2V0dXB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBjb2xvcjogZGFya2N5YW47XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});\nexport { LoginComponent };","map":{"version":3,"names":["API","BehaviorSubject","LoginComponent","constructor","apiService","router","isSellerLoggedIn","ngOnInit","localStorage","getItem","next","navigate","login","data","result","makeRequest","utente","accedi","subscribe","response","tokenData","JSON","stringify","token","parse","ruolo","setItem","i0","ɵɵdirectiveInject","i1","ApiService","i2","Router","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LoginComponent_Template_form_ngSubmit_4_listener","ɵɵrestoreView","_r1","_r0","ɵɵreference","ɵɵresetView","value","ɵɵelement"],"sources":["C:\\Users\\franc\\Documents\\Job\\Progetti\\ecommerce\\frontend\\src\\app\\login\\login.component.ts","C:\\Users\\franc\\Documents\\Job\\Progetti\\ecommerce\\frontend\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ApiService } from '../services/api.service';\nimport { Router } from '@angular/router';\nimport { API } from '../constants';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n  constructor(private apiService:ApiService, private router:Router) {}\n\n  isSellerLoggedIn=new BehaviorSubject<boolean>(false);\n  ngOnInit(){\n      if(localStorage.getItem(\"admin\")){\n        this.isSellerLoggedIn.next(true);\n        this.router.navigate(['admin']);\n      }\n  }\n  login(data:object):void{\n    let result =this.apiService.makeRequest(\"post\",API.utente+API.accedi,data)\n    result.subscribe((response) => {\n      const tokenData = JSON.stringify(response);\n      const token = JSON.parse(tokenData);\n      const ruolo= token.ruolo;\n      if (ruolo === \"ADMIN\") {\n        localStorage.setItem(\"admin\",tokenData)\n        this.isSellerLoggedIn.next(true)\n        this.router.navigate(['admin']);\n      }\n    })\n  }\n}\n","<div class=\"login-container\">\n  <div class=\"\">\n      <h1 class=\"form-setup\">Login</h1>\n      <form #sellerSignUp=\"ngForm\" (ngSubmit)=\"login(sellerSignUp.value)\" class=\"common-form\">\n          <input class=\"form-input\" type=\"email\" ngModel name=\"email\" placeholder=\"Enter email\">\n          <input class=\"form-input\" type=\"password\" ngModel name=\"password\" placeholder=\"Enter password\">\n          <button class=\"form-button\">Login</button>\n      </form>\n  </div>\n</div>"],"mappings":"AAGA,SAASA,GAAG,QAAQ,cAAc;AAClC,SAASC,eAAe,QAAQ,MAAM;;;;;AAEtC,MAKaC,cAAc;EACzBC,YAAoBC,UAAqB,EAAUC,MAAa;IAA5C,KAAAD,UAAU,GAAVA,UAAU;IAAqB,KAAAC,MAAM,GAANA,MAAM;IAEzD,KAAAC,gBAAgB,GAAC,IAAIL,eAAe,CAAU,KAAK,CAAC;EAFe;EAGnEM,QAAQA,CAAA;IACJ,IAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAC;MAC/B,IAAI,CAACH,gBAAgB,CAACI,IAAI,CAAC,IAAI,CAAC;MAChC,IAAI,CAACL,MAAM,CAACM,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;;EAErC;EACAC,KAAKA,CAACC,IAAW;IACf,IAAIC,MAAM,GAAE,IAAI,CAACV,UAAU,CAACW,WAAW,CAAC,MAAM,EAACf,GAAG,CAACgB,MAAM,GAAChB,GAAG,CAACiB,MAAM,EAACJ,IAAI,CAAC;IAC1EC,MAAM,CAACI,SAAS,CAAEC,QAAQ,IAAI;MAC5B,MAAMC,SAAS,GAAGC,IAAI,CAACC,SAAS,CAACH,QAAQ,CAAC;MAC1C,MAAMI,KAAK,GAAGF,IAAI,CAACG,KAAK,CAACJ,SAAS,CAAC;MACnC,MAAMK,KAAK,GAAEF,KAAK,CAACE,KAAK;MACxB,IAAIA,KAAK,KAAK,OAAO,EAAE;QACrBjB,YAAY,CAACkB,OAAO,CAAC,OAAO,EAACN,SAAS,CAAC;QACvC,IAAI,CAACd,gBAAgB,CAACI,IAAI,CAAC,IAAI,CAAC;QAChC,IAAI,CAACL,MAAM,CAACM,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;;IAEnC,CAAC,CAAC;EACJ;;AAtBWT,cAAc,C;mBAAdA,cAAc,EAAAyB,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,MAAA;AAAA;AAAd9B,cAAc,C;QAAdA,cAAc;EAAA+B,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,wBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;;MCX3BZ,EAAA,CAAAc,cAAA,aAA6B;MAEAd,EAAA,CAAAe,MAAA,YAAK;MAAAf,EAAA,CAAAgB,YAAA,EAAK;MACjChB,EAAA,CAAAc,cAAA,iBAAwF;MAA3Dd,EAAA,CAAAiB,UAAA,sBAAAC,iDAAA;QAAAlB,EAAA,CAAAmB,aAAA,CAAAC,GAAA;QAAA,MAAAC,GAAA,GAAArB,EAAA,CAAAsB,WAAA;QAAA,OAAYtB,EAAA,CAAAuB,WAAA,CAAAV,GAAA,CAAA5B,KAAA,CAAAoC,GAAA,CAAAG,KAAA,CAAyB;MAAA,EAAC;MAC/DxB,EAAA,CAAAyB,SAAA,eAAsF;MAEtFzB,EAAA,CAAAc,cAAA,gBAA4B;MAAAd,EAAA,CAAAe,MAAA,YAAK;MAAAf,EAAA,CAAAgB,YAAA,EAAS;;;;;;SDKvCzC,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}